<?xml version="1.0" encoding="UTF-8"?>
<project basedir=".">
	<target name="install_dependencies">
        <!--<if>
            <equals arg1="${INSTALL_SOFTWARE_FROM_SCRIPT}" arg2="true" />
            <then>-->
                <exec executable="cmd" dir="${PROTRACTOR.DIR}" osfamily="windows" failonerror="true">
			        <arg line="/c npm install --production" />
		        </exec>
                <exec executable="bash" dir="${PROTRACTOR.DIR}" osfamily="unix" failonerror="true">
                    <arg value="-c" />
                    <arg value="npm install --production"/>
                </exec>
            <!--</then>
            <else>
                <echo level="info" message="Install of software disabled from config, will use manual install of E2E Dependencies" />
            </else>
        </if>-->
	</target>

	<target name="run_e2e_tests" depends="install_dependencies">
		    <echo level="verbose" message="Run tests script started"/>
			<echo level="verbose" message="Testing solution: ${SERVOY.SOLUTION}"/>

		<exec executable="${PROTRACTOR.DIR}/node_modules/protractor/bin/protractor" failonerror="true">
			<arg value="${PROTRACTOR.CONF}"/>
			<arg value="--params.solutionName=${SERVOY.SOLUTION}"/>
		</exec>
	</target>
</project>
