<project>
    <target name="run_e2e_tests">
            <echo level="verbose" message="Run tests script started"/>
            <echo level="verbose" message="Testing solution: ${SERVOY.SOLUTION}"/>

    <!-- TODO: Add fail handler for PROTRACTOR -->
        <exec executable="protractor${OS.NODE.EXTENTION}" dir="${WORKSPACE}">
            <arg value="${PROTRACTOR.CONF}"/>
            <arg value="--seleniumAddress=${PROTRACTOR.SELENIUM.URL}" />
            <arg value="--params.testDomainURL=${PROTRACTOR.TEST.URL}"/>
            <arg value="--params.reportDirectory=${PROTRACTOR.REPORT.DIR}" />
        </exec>
    </target>

    <macrodef name="fail-if-e2e-failed">
        <sequential>
            <fail message="E2E failed: please check reports." if="${E2E.FAILED}" />
        </sequential>
    </macrodef>
</project>
